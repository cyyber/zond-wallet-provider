"use strict";var z=Object.defineProperty;var v=(e,r,t)=>r in e?z(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var E=(e,r,t)=>(v(e,typeof r!="symbol"?r+"":r,t),t);const w=require("./_commonjsHelpers-DwGv2jUC.cjs"),d=require("./versions-CznKZ0ZU.cjs");var F=g;g.default=g;g.stable=J;g.stableStringify=J;var y="[...]",C="[Circular]",c=[],a=[];function N(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function g(e,r,t,i){typeof i>"u"&&(i=N()),O(e,"",0,[],void 0,0,i);var n;try{a.length===0?n=JSON.stringify(e,r,t):n=JSON.stringify(e,I(r),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;c.length!==0;){var o=c.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return n}function h(e,r,t,i){var n=Object.getOwnPropertyDescriptor(i,t);n.get!==void 0?n.configurable?(Object.defineProperty(i,t,{value:e}),c.push([i,t,r,n])):a.push([r,t,e]):(i[t]=e,c.push([i,t,r]))}function O(e,r,t,i,n,o,u){o+=1;var s;if(typeof e=="object"&&e!==null){for(s=0;s<i.length;s++)if(i[s]===e){h(C,e,r,n);return}if(typeof u.depthLimit<"u"&&o>u.depthLimit){h(y,e,r,n);return}if(typeof u.edgesLimit<"u"&&t+1>u.edgesLimit){h(y,e,r,n);return}if(i.push(e),Array.isArray(e))for(s=0;s<e.length;s++)O(e[s],s,s,i,e,o,u);else{var f=Object.keys(e);for(s=0;s<f.length;s++){var l=f[s];O(e[l],l,s,i,e,o,u)}}i.pop()}}function T(e,r){return e<r?-1:e>r?1:0}function J(e,r,t,i){typeof i>"u"&&(i=N());var n=b(e,"",0,[],void 0,0,i)||e,o;try{a.length===0?o=JSON.stringify(n,r,t):o=JSON.stringify(n,I(r),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;c.length!==0;){var u=c.pop();u.length===4?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return o}function b(e,r,t,i,n,o,u){o+=1;var s;if(typeof e=="object"&&e!==null){for(s=0;s<i.length;s++)if(i[s]===e){h(C,e,r,n);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof u.depthLimit<"u"&&o>u.depthLimit){h(y,e,r,n);return}if(typeof u.edgesLimit<"u"&&t+1>u.edgesLimit){h(y,e,r,n);return}if(i.push(e),Array.isArray(e))for(s=0;s<e.length;s++)b(e[s],s,s,i,e,o,u);else{var f={},l=Object.keys(e).sort(T);for(s=0;s<l.length;s++){var m=l[s];b(e[m],m,s,i,e,o,u),f[m]=e[m]}if(typeof n<"u")c.push([n,r,e]),n[r]=f;else return f}i.pop()}}function I(e){return e=typeof e<"u"?e:function(r,t){return t},function(r,t){if(a.length>0)for(var i=0;i<a.length;i++){var n=a[i];if(n[1]===r&&n[0]===t){t=n[2],a.splice(i,1);break}}return e.call(this,r,t)}}const M=w.getDefaultExportFromCjs(F),A={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},p={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},S=A.rpc.internal,q="Unspecified error message. This is a bug, please report it.",x={code:S,message:_(S)},D="Unspecified server error.";function _(e,r=q){if(V(e)){const t=e.toString();if(d.hasProperty(p,t))return p[t].message;if(B(e))return D}return r}function V(e){return Number.isInteger(e)}function G(e,{fallbackError:r=x,shouldIncludeStack:t=!0}={}){if(!d.isJsonRpcError(r))throw new Error("Must provide fallback error with integer number code and string message.");const i=U(e,r);return t||delete i.stack,i}function U(e,r){if(e&&typeof e=="object"&&"serialize"in e&&typeof e.serialize=="function")return e.serialize();if(d.isJsonRpcError(e))return e;const t=R(e);return{...r,data:{cause:t}}}function B(e){return e>=-32099&&e<=-32e3}function R(e){return Array.isArray(e)?e.map(r=>d.isValidJson(r)?r:d.isObject(r)?P(r):null):d.isObject(e)?P(e):d.isValidJson(e)?e:null}function P(e){return Object.getOwnPropertyNames(e).reduce((r,t)=>{const i=e[t];return d.isValidJson(i)&&(r[t]=i),r},{})}function j(e){return d.isObject(e)&&d.hasProperty(e,"cause")&&d.isObject(e.cause)}class L extends Error{constructor(t,i,n){var r=(...Y)=>(super(...Y),E(this,"cause"),E(this,"code"),E(this,"data"),this);if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!i||typeof i!="string")throw new Error('"message" must be a non-empty string.');j(n)?(r(i,{cause:n.cause}),d.hasProperty(this,"cause")||Object.assign(this,{cause:n.cause})):r(i),n!==void 0&&(this.data=n),this.code=t}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,d.isPlainObject(this.data)&&(t.data.cause=R(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return M(this.serialize(),W,2)}}class H extends L{constructor(r,t,i){if(!K(r))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(r,t,i)}}function K(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function W(e,r){if(r!=="[Circular]")return r}exports.EthereumProviderError=H;exports.JsonRpcError=L;exports.dataHasCause=j;exports.errorCodes=A;exports.getMessageFromCode=_;exports.serializeCause=R;exports.serializeError=G;
