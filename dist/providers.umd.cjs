"use strict";require("./rpcErrors.umd.cjs");require("./utils.umd.cjs");require("./safeEventEmitter.umd.cjs");const h=require("./jsonRpcMiddlewareStream.umd.cjs");require("./objectMultiplex.umd.cjs");require("./superstruct.umd.cjs");var c=function(e,r,o){if(o||arguments.length===2)for(var n=0,t=r.length,i;n<t;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},w=function(){function e(r,o,n){this.name=r,this.version=o,this.os=n,this.type="browser"}return e}(),v=function(){function e(r){this.version=r,this.type="node",this.name="node",this.os=process.platform}return e}(),S=function(){function e(r,o,n,t){this.name=r,this.version=o,this.os=n,this.bot=t,this.type="bot-device"}return e}(),_=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),b=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),g=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,W=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,l=3,B=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",g]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function O(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new b:typeof navigator<"u"?M(navigator.userAgent):E()}function y(e){return e!==""&&B.reduce(function(r,o){var n=o[0],t=o[1];if(r)return r;var i=t.exec(e);return!!i&&[n,i]},!1)}function M(e){var r=y(e);if(!r)return null;var o=r[0],n=r[1];if(o==="searchbot")return new _;var t=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);t?t.length<l&&(t=c(c([],t,!0),x(l-t.length),!0)):t=[];var i=t.join("."),a=m(e),d=W.exec(e);return d&&d[1]?new S(o,i,a,d[1]):new w(o,i,a)}function m(e){for(var r=0,o=f.length;r<o;r++){var n=f[r],t=n[0],i=n[1],a=i.exec(e);if(a)return t}return null}function E(){var e=typeof process<"u"&&process.version;return e?new v(process.version.slice(1)):null}function x(e){for(var r=[],o=0;o<e;o++)r.push("0");return r}var u={};Object.defineProperty(u,"__esModule",{value:!0});u.PortDuplexStream=void 0;const A=h.browserExports;class p extends A.Duplex{constructor(r,o={}){super(Object.assign({objectMode:!0},o)),this._port=r,this._port.onMessage.addListener(n=>this._onMessage(n)),this._port.onDisconnect.addListener(()=>this._onDisconnect()),this._log=()=>null}_onMessage(r){if(Buffer.isBuffer(r)){const o=Buffer.from(r);this._log(o,!1),this.push(o)}else this._log(r,!1),this.push(r)}_onDisconnect(){this.destroy()}_read(){}_write(r,o,n){try{if(Buffer.isBuffer(r)){const t=r.toJSON();t._isBuffer=!0,this._log(t,!0),this._port.postMessage(t)}else this._log(r,!0),this._port.postMessage(r)}catch{return n(new Error("PortDuplexStream - disconnected"))}return n()}_setLogger(r){this._log=r}}u.default=p;u.PortDuplexStream=p;const s=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";s.writable=e=>s(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";s.readable=e=>s(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";s.duplex=e=>s.writable(e)&&s.readable(e);s.transform=e=>s.duplex(e)&&typeof e._transform=="function";O();
